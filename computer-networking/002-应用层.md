# 应用层

1. 网络应用程序体系结构规定了如何在各种端系统上组织该应用程序，通常包含两种主流体系结构：客户-服务器体系结构和对等（P2P）体系结构。

  客户-服务器体系结构中，客户端之间不直接进行通讯，另外，服务器拥有固定的，周知的ip地址。

  P2P体系结构中，应用程序可以在间断连接的主机对之间使用直接通讯，这些主机对被称为对等方。目前流行的流量密集型应用都是P2P体系结构的，包括文件共享（BitTorrent），对等方协助下载加速器（迅雷），因特网电话（Skype）和IPTV（迅雷看看）等。P2P体系结构拥有自扩展性，通常不需要庞大的服务器基础设施和服务器带宽。目前P2P的三个挑战是：ISP友好（因为上传下载速度不对等）、安全性、激励（说服用户自愿向应用提供带宽，存储和计算资源）。

2. 进程通信

  在网络应用程序中，进行通信的实际上是进程，而不是程序。进程通过一个称为套接字（socket）的软件接口向网络发送报文和从网络中接受报文。
  
  套接字是同一台主机内应用层和运输层之间的接口，也被称为应用程序和网络之间的应用程序编程接口。应用程序开发者可以控制套接字在应用层端的一切，但是对该套接字的运输层几乎没有控制权。应用程序开发者对运输层的控制仅限于：a. 选择运输层协议；b. 设置一些运输层参数（比如最大缓存和最大报文段长度）。

  要向目标进程（也就是接受套接字）发送消息，需要在网络中标识出这个进程，要定义两种信息：主机的地址和主机中目标进程的标识符。因特网中，分别用ip地址和端口号来标识二者。

3. 网络应用程序对运输服务的要求：可靠数据运输、吞吐量、时延、安全性。

  具有吞吐量要求的应用被称为带宽敏感应用。带宽敏感的应用具有特定的吞吐量要求，而弹性应用能够根据情况或多或少地利用可供使用的吞吐量。
