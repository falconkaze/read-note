# 异常

1. 异常是指阻止当前方法或作用域继续执行的问题。把异常情形与普通问题相区分很重要。普通问题是指，在当前环境下能够得到足够的信息，总能处理这个错误。而对于异常，就不能继续下去了，因为在当前环境下无法获得必要的信息来解决问题，只能将问题抛到上一层环境。如果上一层还没有足够的信息来处理这个问题，就继续向上抛，知道有足够的信息来处理。

2. 异常使得我们可以把每件事当做一个事务来处理，异常是一种内建的恢复系统，在程序出现问题的时候有可能让程序恢复到正轨上，对于严重的错误，甚至可以自动停止程序。异常的一个重要作用是，在发生问题的时候，不允许程序沿着其正常的路径继续走下去。在C语言中，没有任何方法可以强制程序在出现问题的时候停止继续沿之前的路径走下去。

3. java.util.logging java的日志工具

4. java异常的顶级类是Throwable，它分为两个类型：Error，Exception。Error用来表示编译时和系统错误。Exception是可被抛出的异常。

5. finally语句用来将内存之外的资源恢复到它们的初始状态。通常需要释放的资源有：已经打开的文件，网络连接。

6. 当涉及break，continue，return语句的时候，finally子句也会执行。如果把finally子句和带标签的break及continue配合使用，在Java中就没必要使用goto语句。

7. java异常会丢失。如果在处理前一个异常之前，另一个异常就发生了，这时前一个异常就得不到体现，容易将实际问题掩盖，使得排查问题变得困难。可以在catch住异常的第一时间打印log将异常记录下来，然后再考虑采用什么恢复措施。

8. 重写方法时，不能抛出基类定义的异常之外的异常。这是为了保证使用基类的代码，换成导出类后也可以使用。

  子类的构造器可以抛出父类构造器抛出异常之外的异常。

  子类构造器不能捕获基类构造器抛出的异常，编译错误是父类构造器的调用语句必须是子类构造器的第一条语句（因为子类的构造过程可能依赖父类的成员变量及成员方法）。这里是因为构造器抛出异常就代表对象没有创建出来，而子类经常会依赖到父类对象的成员变量，成员方法，这些都需要有一个父类对象。所以如果父类构造失败，那么子类构造就必然失败。

9. 时刻提醒自己一点：如果异常发生了，所有的东西能够被正确地清理吗。即使发生了异常，所有的东西也应该处于正常的状态。

10. 如果需要在构造方法中初始化网络连接等需要正确关闭的资源时，要特别注意。这时候不适合使用finally子句来清理，因为finally子句在程序正常的时候也会执行，也就是说对象构造完成之后，这些资源就会被关闭，这是不正常的。通常的处理方法是在创建需要清理的对象后，立即进入一个try-finally语句，保证在出现异常的时候，已经初始化的资源能够被正确地关闭。

11. 异常的几种处理方法：

  a. 在知道如何处理的情况下才捕获异常
  b. 解决问题并重新调用产生异常的方法
  c. 进行少许修补，然后绕过异常发生的地方继续进行
  d. 用别的数据进行计算，以替代方法预计会返回的值
  e. 把当前环境下能做的事情尽量做完，然后把相同或不同的异常抛到更高层
  f. 终止程序
  g. 简化异常
  h. 让类库和程序更安全
